<%= render partial: 'layouts/header' %>
<h1>収入登録しよう！！</h1>

<%= form_with model: @basic_income_record, remote: true do |f| %>
  <p>
    <%= label_tag :registerdate, '◆日付：' %>
    <%= f.date_field :registerdate %>
  </p>
  <p>
    <%= label_tag :money, '◆金額：' %>
    <%= f.number_field :money %>
  </p>
  <p>
    <%= label_tag :memo, '◆MEMO：' %>
    <%= f.text_field :memo %>
  </p>
  <P>
    <%= label_tag :basic_income_category_id, '◆収入科目：' %>
    <br />
    <p>・基本科目</p>
    <%= f.collection_radio_buttons :basic_income_category_id, BasicIncomeCategory.all, :id, :name, {id: "basic_income_group"}, disabled: false, onclick: "basicfunc()" %>
    <br />
    <p>・オリジナル追加科目</p>
    <%= f.collection_radio_buttons :original_income_category_id, OriginalIncomeCategory.all, :id, :name, {id: "original_income_group"}, disabled: false, onclick: "originalfunc()" %>
  </P>
  <P>
    <%= f.hidden_field :user_id, value: current_user.id %>
  </P>
  
  <%= button_to '登録1', {controller: 'basic_income_records', action: 'create'}, {method: :post, id: 'bir', onclick: 'clickBtn1()' }%>
  <input id="oir" type="button" value="登録2" onclick="clickBtn2()" />
<% end %>

  <script>
   document.getElementById("bir").style.display ="none";
   document.getElementById("oir").style.display ="none";
   document.getElementById("bir").onclick = "clickBtn1";
   //basic_income_catgeoryを押したとき！！
   var basicfunc = function(){
     var oic = document.querySelectorAll('[id^="original"]');
       for (var i = 0; i < oic.length; i++) {
         oic[i].disabled = true;
      }//original_income_categoryをdisabledする
     //basic_income_record専用のbuttonを表示する
     location.href='https://b35d31f38bf146ceab70f1bfc3b4f541.vfs.cloud9.us-east-2.amazonaws.com/basic_income_records/new';
     
     const p1 = document.getElementById("bir");

	   if(p1.style.display=="block"){
		    p1.style.display ="none";
	   }else{
			p1.style.display ="block";
			var clickBtn1 = function(){
             // Ajax通信を開始する
            $.ajax({
               type: "POST",
               url: '/basic_income_records',
               success: function() {
                   console.log('成功');
               },
               error: function(){
                   console.log('失敗');
               }
           })
	     };
	   };
	   
   };
   //original_income_categoryを押したとき
   var originalfunc = function(){
     var bic = document.querySelectorAll('[id^="basic"]');
       for (var i = 0; i < bic.length; i++) {
         bic[i].disabled = true;
       }//basic_income_categoryをdisabledする
     //original_income_record専用のbuttonを表示する
     const p2 = document.getElementById("oir");

	   if(p2.style.display=="block"){
		    p2.style.display ="none";
	   }else{
			p2.style.display ="block";
	   }
   };
   
  </script>
  
  			